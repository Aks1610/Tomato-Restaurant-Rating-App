{"ast":null,"code":"import _slicedToArray from \"/Users/srushith/Downloads/or0so/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/srushith/Downloads/or0so/src/Rating.js\";\nimport React, { useState, useEffect } from \"react\";\nimport StarRatings from \"react-star-ratings\";\nimport axios from \"axios\";\nimport api from \"./api.json\";\n\nvar Rating = function Rating(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      rest = _useState2[0],\n      setRest = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentIndex = _useState4[0],\n      setIndex = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      rating = _useState6[0],\n      setRating = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setLoading = _useState8[1];\n\n  useEffect(function () {\n    axios.get(api.allResturant).then(function (res) {\n      if (res.data.statusCode === 200) {\n        setRest(res.data.response);\n      }\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }, []);\n\n  var saveRating = function saveRating() {\n    setLoading(true);\n\n    if (currentIndex < rest.length - 1) {\n      axios.post(api.saveRating, {\n        restaurant_name: rest[currentIndex].restaurant_name,\n        restaurant_id: rest[currentIndex].restaurant_name,\n        user_id: \"98789\",\n        rating: rating\n      }).then(function (res) {\n        setRating(0);\n        setLoading(false);\n        setIndex(currentIndex + 1);\n      });\n    } else {\n      props.history.push(\"/leaderboard\");\n    }\n  };\n\n  if (rest.length) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title has-text-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, rest[currentIndex].restaurant_name), React.createElement(StarRatings, {\n      rating: rating,\n      starRatedColor: \"blue\",\n      changeRating: function changeRating(event) {\n        setRating(event);\n      },\n      numberOfStars: 5,\n      name: \"rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"buttons is-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"button is-primary \".concat(isLoading ? \"is-loading\" : \"\"),\n      onClick: function onClick() {\n        saveRating();\n      },\n      disabled: isLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Save\")));\n  } else {\n    return React.createElement(\"div\", {\n      className: \"pageloader is-right-to-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Loading...\"));\n  }\n};\n\nexport default Rating;","map":{"version":3,"sources":["/Users/srushith/Downloads/or0so/src/Rating.js"],"names":["React","useState","useEffect","StarRatings","axios","api","Rating","props","rest","setRest","currentIndex","setIndex","rating","setRating","isLoading","setLoading","get","allResturant","then","res","data","statusCode","response","catch","err","console","log","saveRating","length","post","restaurant_name","restaurant_id","user_id","history","push","event"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,YAAhB;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK,EAAI;AAAA,kBACEN,QAAQ,CAAC,EAAD,CADV;AAAA;AAAA,MACfO,IADe;AAAA,MACTC,OADS;;AAAA,mBAEWR,QAAQ,CAAC,CAAD,CAFnB;AAAA;AAAA,MAEfS,YAFe;AAAA,MAEDC,QAFC;;AAAA,mBAGMV,QAAQ,CAAC,CAAD,CAHd;AAAA;AAAA,MAGfW,MAHe;AAAA,MAGPC,SAHO;;AAAA,mBAIUZ,QAAQ,CAAC,KAAD,CAJlB;AAAA;AAAA,MAIfa,SAJe;AAAA,MAIJC,UAJI;;AAKtBb,EAAAA,SAAS,CAAC,YAAM;AACdE,IAAAA,KAAK,CACFY,GADH,CACOX,GAAG,CAACY,YADX,EAEGC,IAFH,CAEQ,UAAAC,GAAG,EAAI;AACX,UAAIA,GAAG,CAACC,IAAJ,CAASC,UAAT,KAAwB,GAA5B,EAAiC;AAC/BZ,QAAAA,OAAO,CAACU,GAAG,CAACC,IAAJ,CAASE,QAAV,CAAP;AACD;AACF,KANH,EAOGC,KAPH,CAOS,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,KAPZ;AAQD,GATQ,EASN,EATM,CAAT;;AAWA,MAAMG,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBZ,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAIL,YAAY,GAAGF,IAAI,CAACoB,MAAL,GAAc,CAAjC,EAAoC;AAClCxB,MAAAA,KAAK,CACFyB,IADH,CACQxB,GAAG,CAACsB,UADZ,EACwB;AACpBG,QAAAA,eAAe,EAAEtB,IAAI,CAACE,YAAD,CAAJ,CAAmBoB,eADhB;AAEpBC,QAAAA,aAAa,EAAEvB,IAAI,CAACE,YAAD,CAAJ,CAAmBoB,eAFd;AAGpBE,QAAAA,OAAO,EAAE,OAHW;AAIpBpB,QAAAA,MAAM,EAAEA;AAJY,OADxB,EAOGM,IAPH,CAOQ,UAAAC,GAAG,EAAI;AACXN,QAAAA,SAAS,CAAC,CAAD,CAAT;AACAE,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAJ,QAAAA,QAAQ,CAACD,YAAY,GAAG,CAAhB,CAAR;AACD,OAXH;AAYD,KAbD,MAaO;AACLH,MAAAA,KAAK,CAAC0B,OAAN,CAAcC,IAAd,CAAmB,cAAnB;AACD;AACF,GAlBD;;AAoBA,MAAI1B,IAAI,CAACoB,MAAT,EAAiB;AACf,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGpB,IAAI,CAACE,YAAD,CAAJ,CAAmBoB,eADtB,CADF,EAIE,oBAAC,WAAD;AACE,MAAA,MAAM,EAAElB,MADV;AAEE,MAAA,cAAc,EAAC,MAFjB;AAGE,MAAA,YAAY,EAAE,sBAAAuB,KAAK,EAAI;AACrBtB,QAAAA,SAAS,CAACsB,KAAD,CAAT;AACD,OALH;AAME,MAAA,aAAa,EAAE,CANjB;AAOE,MAAA,IAAI,EAAC,QAPP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAgBE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,8BAAuBrB,SAAS,GAAG,YAAH,GAAkB,EAAlD,CADX;AAEE,MAAA,OAAO,EAAE,mBAAM;AACba,QAAAA,UAAU;AACX,OAJH;AAKE,MAAA,QAAQ,EAAEb,SALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAhBF,CADF;AA8BD,GA/BD,MA+BO;AACL,WACE;AAAK,MAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF;AAKD;AACF,CA1ED;;AA4EA,eAAeR,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport StarRatings from \"react-star-ratings\";\nimport axios from \"axios\";\nimport api from \"./api.json\";\n\nconst Rating = props => {\n  const [rest, setRest] = useState([]);\n  const [currentIndex, setIndex] = useState(0);\n  const [rating, setRating] = useState(0);\n  const [isLoading, setLoading] = useState(false);\n  useEffect(() => {\n    axios\n      .get(api.allResturant)\n      .then(res => {\n        if (res.data.statusCode === 200) {\n          setRest(res.data.response);\n        }\n      })\n      .catch(err => console.log(err));\n  }, []);\n\n  const saveRating = () => {\n    setLoading(true);\n    if (currentIndex < rest.length - 1) {\n      axios\n        .post(api.saveRating, {\n          restaurant_name: rest[currentIndex].restaurant_name,\n          restaurant_id: rest[currentIndex].restaurant_name,\n          user_id: \"98789\",\n          rating: rating\n        })\n        .then(res => {\n          setRating(0);\n          setLoading(false);\n          setIndex(currentIndex + 1);\n        });\n    } else {\n      props.history.push(\"/leaderboard\");\n    }\n  };\n\n  if (rest.length) {\n    return (\n      <div>\n        <div className=\"title has-text-centered\">\n          {rest[currentIndex].restaurant_name}\n        </div>\n        <StarRatings\n          rating={rating}\n          starRatedColor=\"blue\"\n          changeRating={event => {\n            setRating(event);\n          }}\n          numberOfStars={5}\n          name=\"rating\"\n        />\n        <br />\n        <br />\n        <br />\n        <div className=\"buttons is-centered\">\n          <button\n            className={`button is-primary ${isLoading ? \"is-loading\" : \"\"}`}\n            onClick={() => {\n              saveRating();\n            }}\n            disabled={isLoading}\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"pageloader is-right-to-left\">\n        <span className=\"title\">Loading...</span>\n      </div>\n    );\n  }\n};\n\nexport default Rating;\n"]},"metadata":{},"sourceType":"module"}